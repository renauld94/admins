{"version":"NotebookV1","origId":3734112144919701,"name":"M2_2.3_DISPLAY","language":"python","commands":[{"version":"CommandV1","origId":6236043882621879,"guid":"346b59c7-c993-4e50-ba6f-a953479257df","subtype":"command","commandType":"auto","position":8.93359375,"command":"%md\n## Prevention Strategies ##\n* __Implement comprehensive unit testing for all control paths__  \nWrite automated tests to check that every branch of logic (e.g., `if/else` conditions) works correctly. For example, Verify that `AESEV` (adverse event severity) is always mapped to “MILD”, “MODERATE”, or “SEVERE” and not left blank.\n* __Use code reviews focused specifically on control flow logic__  \nPeer programmers review decision-making sections of the code, not just syntax.  \nFor instance, reviewing the logic that determines `DSDECOD` (“COMPLETED” vs “DISCONTINUED”), ensuring no subject is wrongly excluded.\n* __Create validation datasets that target boundary conditions__  \nBuild small test datasets with edge cases (e.g., minimum/maximum values, missing values, unusual formats).\nAn example is including subjects with `AGE=0`, `AGE=120`, and missing `SEX` to test the DM domain derivations.\n* __Document expected behavior for all decision points__  \nClearly write down rules for how the program should handle every conditional branch, especially for rare or missing data.","commandVersion":55,"state":"input","results":null,"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"errorDetails":null,"baseErrorDetails":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[],"subcommandOptions":null,"contentSha256Hex":null,"tableResultSettingsMap":{},"nuid":"d29b6f59-7898-481e-ae8c-2c5930dfc16a"},{"version":"CommandV1","origId":6236043882621883,"guid":"16763db3-d9b9-4a65-8027-43e3e358e311","subtype":"command","commandType":"auto","position":8.4375,"command":"%md\n## Try/Except Patterns for Robust Processing ##\n* __Purpose__  \nTry/Except blocks allow a program to continue running even when unexpected errors occur, preventing an entire ETL or SDTM pipeline from failing\n* __Handling data anamolies__  \nClinical trial data often contains unexpected values, missing fields, or incorrect formats. Instead of crashing, `try/except` lets you catch the error, log it, and move on\n* __Benefits__  \n  * Ensures robustness: one bad record won't stop processing of thousands of valid ones\n  * Provides traceability: anomalies can be logged and reported to Data Management for query resolution\n  * Maintains compliance: avoids submission delays caused by pipeline crashes late in the process","commandVersion":30,"state":"input","results":null,"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"errorDetails":null,"baseErrorDetails":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[],"subcommandOptions":null,"contentSha256Hex":null,"tableResultSettingsMap":{},"nuid":"76e4403b-2c46-4db1-b9aa-7a09d8bdefab"},{"version":"CommandV1","origId":6236043882621880,"guid":"f176d142-86ff-4959-b0fe-50f2d9c30af1","subtype":"command","commandType":"auto","position":8.25,"command":"%md\n## Advanced Control Structure Patterns ##\n### List Comprehensions for Data Transformation ###\n* __Concise syntax__  \nA single line of code can replace multiple lines of loops and conditionals, making programs easier to read and maintain\n* __Filtering clinical data__  \nEasily remove invalid, out-of-range, or missing values before mapping to SDTM domains\n* __Transforming raw data__  \nApply standard conversions such as unit changes (mg to g, °F to °C)\n* __Creating derived variables__  \nDerive analysis-ready values directly from raw data\n\n## Example ##","commandVersion":31,"state":"input","results":null,"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"errorDetails":null,"baseErrorDetails":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[],"subcommandOptions":null,"contentSha256Hex":null,"tableResultSettingsMap":{},"nuid":"2c6307ce-b877-4e24-b353-84b1c71d7101"},{"version":"CommandV1","origId":6236043882621881,"guid":"bb3c93a9-b29b-414d-8ae9-a3db17a4775f","subtype":"command","commandType":"auto","position":8.375,"command":"# A list of blood pressure readings, each represented as a dictionary\n# with \"systolic\" and \"diastolic\" values\nBLOOD_PRESSURE_DATA = [\n    {\"systolic\": 120, \"diastolic\": 80},\n    {\"systolic\": 150, \"diastolic\": 90},\n    {\"systolic\": 280, \"diastolic\": 100},  # Implausibly high systolic value\n]\n\n# Use a list comprehension to filter out invalid measurements\n# Keep only readings where:\n#   - systolic is between 60 and 200\n#   - diastolic is between 40 and 120\nVALID_MEASUREMENTS = [\n    READING for READING in BLOOD_PRESSURE_DATA\n    if 60 <= READING[\"systolic\"] <= 200\n    and 40 <= READING[\"diastolic\"] <= 120\n]\n\n# Print the filtered list of valid blood pressure readings\nprint(VALID_MEASUREMENTS)\n","commandVersion":22,"state":"finished","results":{"type":"listResults","data":[{"type":"ansi","data":"[{'systolic': 120, 'diastolic': 80}, {'systolic': 150, 'diastolic': 90}]\n","name":"stdout","arguments":{},"addedWidgets":{},"removedWidgets":[],"datasetInfos":[],"metadata":{}}],"arguments":{},"addedWidgets":{},"removedWidgets":[],"datasetInfos":[],"metadata":{"isDbfsCommandResult":false}},"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"errorDetails":null,"baseErrorDetails":null,"workflows":[],"startTime":1757400019768,"submitTime":1757400019731,"finishTime":1757400019882,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{"rowLimit":10000,"byteLimit":2048000},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[["ansi",73]],"subcommandOptions":null,"contentSha256Hex":null,"tableResultSettingsMap":{},"nuid":"50ad1819-dab5-4691-a09f-2c66f03eca1d"},{"version":"CommandV1","origId":3734112144919702,"guid":"684dcde7-0e29-44ed-8876-b8850e6cda6e","subtype":"command","commandType":"auto","position":1.0,"command":"%md\n# Session 2.3: Control Structures #","commandVersion":4,"state":"input","results":null,"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"errorDetails":null,"baseErrorDetails":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[],"subcommandOptions":null,"contentSha256Hex":null,"tableResultSettingsMap":{},"nuid":"f0d3d676-8d18-4fd4-9ed9-e756c3a1ab5a"},{"version":"CommandV1","origId":3734112144919703,"guid":"e32fad71-833e-49ff-a3af-a421975a7373","subtype":"command","commandType":"auto","position":1.5,"command":"%md\n## \uD83C\uDFAF Objectives ##\n* Learn about conditional logic, where `if`/`elif`/`else` patterns are adopted\n* Understand iteration techniques, making use of `while` and `for` loops\n* Discovering more complex control structures, such as nesting of if-statements and for-loops.","commandVersion":44,"state":"input","results":null,"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"errorDetails":null,"baseErrorDetails":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[],"subcommandOptions":null,"contentSha256Hex":null,"tableResultSettingsMap":{},"nuid":"b6c9386d-c1f6-4d94-9439-e83d9d2d6d51"},{"version":"CommandV1","origId":3734112144919704,"guid":"a0933b3d-6a86-4b5b-b6b4-5bdb32bb3111","subtype":"command","commandType":"auto","position":2.0,"command":"%md\n### Importance of Control Structures ###\n* Consistent decision paths for reproducible results\n* Validation checkpoints to ensure data integrity\n* Audit trail capabilities to meet FDA requirements\n* Error handling mechanisms that prevent silent failures","commandVersion":43,"state":"input","results":null,"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"errorDetails":null,"baseErrorDetails":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[],"subcommandOptions":null,"contentSha256Hex":null,"tableResultSettingsMap":{},"nuid":"f239b214-2dd4-42d3-a0bf-410d3b83563c"},{"version":"CommandV1","origId":3734112144919705,"guid":"00f5c161-e3a8-42e6-a87f-71297a0b2535","subtype":"command","commandType":"auto","position":3.0,"command":"%md\n## Types of Control Structures ##\n\n### If/Then/Else ###\nIf/Then/Else structures allow programs to make decisions by evaluating conditions. For example, validating if a patient's sex adheres to predefined standards like those in SDTM.\n\n### Example ###","commandVersion":40,"state":"input","results":null,"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"errorDetails":null,"baseErrorDetails":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[],"subcommandOptions":null,"contentSha256Hex":null,"tableResultSettingsMap":{},"nuid":"3a53e2db-cd0e-4605-86c3-0433f1a86f8f"},{"version":"CommandV1","origId":3734112144919706,"guid":"0a7f1f39-8254-485b-93ea-bc9750de8214","subtype":"command","commandType":"auto","position":4.0,"command":"# Example: Validating a subject's sex in DM (Demographics) domain\nsubject_sex = \"X\" # Example data: an invalid sex value\n\nif subject_sex not in [\"M\", \"F\", \"U\", \"UNDIFFERENTIATED\"]:\n   print(f\"SDTM Validation Error: Invalid SEX value '{subject_sex}' detected.\")\n   print(\"Acceptable values are 'M', 'F', 'U', or 'UNDIFFERENTIATED'.\")\nelse:\n   print(f\"SDTM Validation: SEX value '{subject_sex}' is valid.\")","commandVersion":21,"state":"finished","results":{"type":"listResults","data":[{"type":"ansi","data":"SDTM Validation Error: Invalid SEX value 'X' detected.\nAcceptable values are 'M', 'F', 'U', or 'UNDIFFERENTIATED'.\n","name":"stdout","arguments":{},"addedWidgets":{},"removedWidgets":[],"datasetInfos":[],"metadata":{}}],"arguments":{},"addedWidgets":{},"removedWidgets":[],"datasetInfos":[],"metadata":{"isDbfsCommandResult":false}},"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"errorDetails":null,"baseErrorDetails":null,"workflows":[],"startTime":1757398846441,"submitTime":1757398837938,"finishTime":1757398847940,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{"rowLimit":10000,"byteLimit":2048000},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[["ansi",115]],"subcommandOptions":null,"contentSha256Hex":null,"tableResultSettingsMap":{},"nuid":"4080d7d4-55eb-445e-a5c3-6dc27d5f7316"},{"version":"CommandV1","origId":3734112144919709,"guid":"20e53b21-3196-4879-8220-7ffdbcfa5a6b","subtype":"command","commandType":"auto","position":7.0,"command":"%md\n### While/For loops ###\nWhile/For loops, enables computer programs to repeatedly execute a block of code. In clinical programming, this is crucial for efficiently processing large datasets, such as iterating through lab results to flag abnormal findings.\n\n## Example ##","commandVersion":33,"state":"input","results":null,"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"errorDetails":null,"baseErrorDetails":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[],"subcommandOptions":null,"contentSha256Hex":null,"tableResultSettingsMap":{},"nuid":"6d007331-23de-428b-93dd-60b6025dbbe8"},{"version":"CommandV1","origId":3734112144919710,"guid":"f3f2aa11-089f-4315-b112-8a37535d0249","subtype":"command","commandType":"auto","position":8.0,"command":"# Example: Iterating through a list of lab results (LB domain)\nlab_results = [\n    {\"LBTEST\": \"Hemoglobin\", \"LBSTRESN\": 14.5, \"LBNRIND\": \"NORMAL\"},\n    {\"LBTEST\": \"Glucose\", \"LBSTRESN\": 130.0, \"LBNRIND\": \"HIGH\"}, # Abnormal\n    {\"LBTEST\": \"Creatinine\", \"LBSTRESN\": 0.9, \"LBNRIND\": \"NORMAL\"}\n]\n\nprint(\"Processing Lab Results:\")\nfor result in lab_results:\n    test_name = result[\"LBTEST\"]\n    numeric_value = result[\"LBSTRESN\"]\n    normal_range_indicator = result[\"LBNRIND\"]\n\n    if normal_range_indicator != \"NORMAL\":\n        print(f\"Flagged: {test_name} value {numeric_value} is {normal_range_indicator}!\")\n    else:\n        print(f\"{test_name} value {numeric_value} is within normal range.\")","commandVersion":16,"state":"finished","results":{"type":"listResults","data":[{"type":"ansi","data":"Processing Lab Results:\nHemoglobin value 14.5 is within normal range.\nFlagged: Glucose value 130.0 is HIGH!\nCreatinine value 0.9 is within normal range.\n","name":"stdout","arguments":{},"addedWidgets":{},"removedWidgets":[],"datasetInfos":[],"metadata":{}}],"arguments":{},"addedWidgets":{},"removedWidgets":[],"datasetInfos":[],"metadata":{"isDbfsCommandResult":false}},"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"errorDetails":null,"baseErrorDetails":null,"workflows":[],"startTime":1757398853803,"submitTime":1757398853743,"finishTime":1757398854503,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{"rowLimit":10000,"byteLimit":2048000},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[["ansi",153]],"subcommandOptions":null,"contentSha256Hex":null,"tableResultSettingsMap":{},"nuid":"416f0133-6eef-402e-84a3-82b32167f985"},{"version":"CommandV1","origId":3734112144919711,"guid":"709b376c-5c07-49b6-aa4c-1fcf3bdbe70b","subtype":"command","commandType":"auto","position":9.0,"command":"%md\n## \uD83D\uDCD6 Summary ##\n* __Control Structures are Fundamental__   \nIF statements and loops (FOR, WHILE) are the building blocks for decision-making and efficient data processing in clinical programming.\n* __Advanced Patterns Enhance Robustness__  \nTechniques like list comprehensions, `try/except` blocks, and context managers streamline code and manage data anomalies effectively\n* __Manage Complexity__  \nNested logic is powerful for complex scenarios, but requires clear design, strict limits, and thorough testing to prevent errors\n* __Quality & Compliance are Paramount__  \nAdherence to best practices, comprehensive testing, and alignment with FDA 21 CFR Part 11 are crucial for trustworthy and submission-ready clinical code.","commandVersion":58,"state":"input","results":null,"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"errorDetails":null,"baseErrorDetails":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[],"subcommandOptions":null,"contentSha256Hex":null,"tableResultSettingsMap":{},"nuid":"c3e8d3d4-7b39-4b5c-b347-f74cc95cc2f6"},{"version":"CommandV1","origId":6236043882621884,"guid":"8dc01c54-01b0-44c0-8d7c-ac4583fe2f66","subtype":"command","commandType":"auto","position":8.46875,"command":"# Example subject data with lab results\nSUBJECT_DATA = {\n    \"subject_id\": 123,\n    \"lab_results\": [\n        {\"name\": \"glucose\", \"value\": 100},\n        {\"name\": \"blood_pressure\", \"value\": 120},\n    ]\n}\n\nSUBJECT_ID = SUBJECT_DATA[\"subject_id\"]\n\ntry:\n    # Simulate processing lab results\n    # Here we raise an error to mimic detection of invalid data\n    raise ValueError(\"Bad data encountered in lab results.\")\n\nexcept ValueError as e:\n    # Log the error with subject ID for traceability\n    print(\"Error processing subject\", SUBJECT_ID, \":\", str(e))\n\n    # Flag subject for manual review since automatic processing failed\n    print(\"Flagging subject\", SUBJECT_ID, \"for manual review.\")\n","commandVersion":47,"state":"finished","results":{"type":"listResults","data":[{"type":"ansi","data":"Error processing subject 123 : Bad data encountered in lab results.\nFlagging subject 123 for manual review.\n","name":"stdout","arguments":{},"addedWidgets":{},"removedWidgets":[],"datasetInfos":[],"metadata":{}}],"arguments":{},"addedWidgets":{},"removedWidgets":[],"datasetInfos":[],"metadata":{"isDbfsCommandResult":false}},"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"errorDetails":null,"baseErrorDetails":null,"workflows":[],"startTime":1757400849293,"submitTime":1757400849256,"finishTime":1757400849472,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{"rowLimit":10000,"byteLimit":2048000},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[["ansi",108]],"subcommandOptions":null,"contentSha256Hex":null,"tableResultSettingsMap":{},"nuid":"959292a2-80f2-4156-adaa-c693de740a47"},{"version":"CommandV1","origId":6236043882621878,"guid":"e1e1bf24-a0cc-44b5-b054-9f056243a132","subtype":"command","commandType":"auto","position":8.734375,"command":"%md\n## Logic Errors That Compromise Submissions ##\n* __Off-by-one errors in subject indexing that misalign patient data__  \nA loop or array index shifts by one position, so subject-level variables no longer match correctly. This could result in the misreporting of demographics, adverse events or lab values\n* __Silent failures that process invalid data without flagging issues__  \nInvalid or impossible values (e.g. `AGE = -5`) are processed without validation checks\n* __Undocumented edge cases that handle rare conditions inconsistently__  \nRare conditions or unusual data points are handled ad-hoc instead of according to a documented rule. For example, a subject with `MHTERM = \"Rare Syndrome X\"` is coded as `MHDECOD = \"Other\"` in one isntance, and left blank in another.\n* __Inadvertent data exclusion through overly restrictive conditionals__  \nLogic designed to filter data unintentionally drops valid records. For instance, a filter `if SEX == \"F\": keep` removes all male subjects.","commandVersion":67,"state":"input","results":null,"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"errorDetails":null,"baseErrorDetails":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[],"subcommandOptions":null,"contentSha256Hex":null,"tableResultSettingsMap":{},"nuid":"03b82f70-11be-43de-8af6-7dd9351419ca"},{"version":"CommandV1","origId":6613794229036872,"guid":"d0861859-ba39-4faa-bc7f-0a7095a1b75c","subtype":"command","commandType":"auto","position":8.8671875,"command":"# Subject indexing error (shifted by one)\nSUBJIDS = [101, 102, 103]\nAGES = [35, 42, 29]\n\nfor i in range(len(SUBJIDS)):\n    print(SUBJIDS[i], AGES[i+1])  # Off-by-one → misaligned age\n","commandVersion":1,"state":"error","results":{"type":"listResults","data":[{"type":"ansi","data":"101 42\n102 29\n","name":"stdout","arguments":{},"addedWidgets":{},"removedWidgets":[],"datasetInfos":[],"metadata":{}}],"arguments":{},"addedWidgets":{},"removedWidgets":[],"datasetInfos":[],"metadata":{"isDbfsCommandResult":false}},"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":"<span class='ansi-red-fg'>IndexError</span>: list index out of range","errorTraceType":"baseError","error":"\u001B[0;31m---------------------------------------------------------------------------\u001B[0m\n\u001B[0;31mIndexError\u001B[0m                                Traceback (most recent call last)\nFile \u001B[0;32m<command-6613794229036872>, line 6\u001B[0m\n\u001B[1;32m      3\u001B[0m AGES \u001B[38;5;241m=\u001B[39m [\u001B[38;5;241m35\u001B[39m, \u001B[38;5;241m42\u001B[39m, \u001B[38;5;241m29\u001B[39m]\n\u001B[1;32m      5\u001B[0m \u001B[38;5;28;01mfor\u001B[39;00m i \u001B[38;5;129;01min\u001B[39;00m \u001B[38;5;28mrange\u001B[39m(\u001B[38;5;28mlen\u001B[39m(SUBJIDS)):\n\u001B[0;32m----> 6\u001B[0m     \u001B[38;5;28mprint\u001B[39m(SUBJIDS[i], AGES[i\u001B[38;5;241m+\u001B[39m\u001B[38;5;241m1\u001B[39m])\n\n\u001B[0;31mIndexError\u001B[0m: list index out of range","errorDetails":null,"baseErrorDetails":{"type":"baseError","stackFrames":["\u001B[0;31m---------------------------------------------------------------------------\u001B[0m","\u001B[0;31mIndexError\u001B[0m                                Traceback (most recent call last)","File \u001B[0;32m<command-6613794229036872>, line 6\u001B[0m\n\u001B[1;32m      3\u001B[0m AGES \u001B[38;5;241m=\u001B[39m [\u001B[38;5;241m35\u001B[39m, \u001B[38;5;241m42\u001B[39m, \u001B[38;5;241m29\u001B[39m]\n\u001B[1;32m      5\u001B[0m \u001B[38;5;28;01mfor\u001B[39;00m i \u001B[38;5;129;01min\u001B[39;00m \u001B[38;5;28mrange\u001B[39m(\u001B[38;5;28mlen\u001B[39m(SUBJIDS)):\n\u001B[0;32m----> 6\u001B[0m     \u001B[38;5;28mprint\u001B[39m(SUBJIDS[i], AGES[i\u001B[38;5;241m+\u001B[39m\u001B[38;5;241m1\u001B[39m])\n","\u001B[0;31mIndexError\u001B[0m: list index out of range"],"arguments":{},"addedWidgets":{},"removedWidgets":[],"datasetInfos":[],"metadata":{},"jupyterProps":{"ename":"IndexError","evalue":"list index out of range"},"sqlProps":null},"workflows":[],"startTime":1757399081283,"submitTime":1757399081241,"finishTime":1757399082001,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{"rowLimit":10000,"byteLimit":2048000},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[["ansi",14]],"subcommandOptions":null,"contentSha256Hex":null,"tableResultSettingsMap":{},"nuid":"aa7e847a-f632-4a5e-b87f-dbbca47a7252"},{"version":"CommandV1","origId":6613794229036873,"guid":"55a841ba-7995-443f-8ae4-f39368fdee0b","subtype":"command","commandType":"auto","position":8.966796875,"command":"# Example: Handling missing SEX\n# Rule: If SEX is missing, set to \"U\" (Unknown)\nSEX = \"F\"\nif not SEX:\n    SEX = \"U\"\n","commandVersion":4,"state":"finished","results":{"type":"listResults","data":[],"arguments":{},"addedWidgets":{},"removedWidgets":[],"datasetInfos":[],"metadata":{"isDbfsCommandResult":false}},"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"errorDetails":null,"baseErrorDetails":{"type":"baseError","stackFrames":["\u001B[0;31m---------------------------------------------------------------------------\u001B[0m","\u001B[0;31mNameError\u001B[0m                                 Traceback (most recent call last)","File \u001B[0;32m<command-6613794229036873>, line 3\u001B[0m\n\u001B[1;32m      1\u001B[0m \u001B[38;5;66;03m# Example: Handling missing SEX\u001B[39;00m\n\u001B[1;32m      2\u001B[0m \u001B[38;5;66;03m# Rule: If SEX is missing, set to \"U\" (Unknown)\u001B[39;00m\n\u001B[0;32m----> 3\u001B[0m \u001B[38;5;28;01mif\u001B[39;00m \u001B[38;5;129;01mnot\u001B[39;00m SEX:\n\u001B[1;32m      4\u001B[0m     SEX \u001B[38;5;241m=\u001B[39m \u001B[38;5;124m\"\u001B[39m\u001B[38;5;124mU\u001B[39m\u001B[38;5;124m\"\u001B[39m\n","\u001B[0;31mNameError\u001B[0m: name 'SEX' is not defined"],"arguments":{},"addedWidgets":{},"removedWidgets":[],"datasetInfos":[],"metadata":{},"jupyterProps":{"ename":"NameError","evalue":"name 'SEX' is not defined"},"sqlProps":null},"workflows":[],"startTime":1757400038562,"submitTime":1757400038532,"finishTime":1757400038722,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{"rowLimit":10000,"byteLimit":2048000},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[],"subcommandOptions":null,"contentSha256Hex":null,"tableResultSettingsMap":{},"nuid":"4b44ebeb-88df-43f9-95e6-7a879a20130a"}],"dashboards":[],"guid":"148b21a3-2987-4691-b634-f7e1b7c26634","globalVars":{},"iPythonMetadata":null,"inputWidgets":{},"notebookMetadata":{"pythonIndentUnit":4},"reposExportFormat":"JUPYTER","environmentMetadata":{"client":"3","base_environment":""},"computePreferences":null,"inputWidgetPreferences":null}